{"ast":null,"code":"import React,{useState,useEffect}from'react';import{locationAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LocationHabits=()=>{const[nearbyHabits,setNearbyHabits]=useState([]);const[nearbyTasks,setNearbyTasks]=useState([]);const[loading,setLoading]=useState(false);const[location,setLocation]=useState(null);useEffect(()=>{getCurrentLocation();},[]);const getCurrentLocation=()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{setLocation({latitude:position.coords.latitude,longitude:position.coords.longitude});loadNearbyItems(position.coords.latitude,position.coords.longitude);},error=>{console.error('Error getting location:',error);alert('Unable to get your location. Please enable location services.');});}else{alert('Geolocation is not supported by your browser.');}};const loadNearbyItems=async(lat,lon)=>{try{setLoading(true);const res=await locationAPI.getNearby({latitude:lat,longitude:lon});setNearbyHabits(res.data.habits||[]);setNearbyTasks(res.data.tasks||[]);}catch(error){console.error('Failed to load nearby items:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-white mb-8\",children:\"\\uD83D\\uDCCD Location-Based Habits & Tasks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:getCurrentLocation,disabled:loading,className:\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition disabled:opacity-50\",children:loading?'Loading...':'Refresh Location'})}),location&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 text-sm text-gray-600 dark:text-gray-400\",children:[\"Current Location: \",location.latitude.toFixed(4),\", \",location.longitude.toFixed(4)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 dark:text-white mb-4\",children:\"Nearby Habits\"}),nearbyHabits.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No habits found near your location.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:nearbyHabits.map(habit=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-2\",children:habit.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 mb-2\",children:[\"Distance: \",Math.round(habit.distance),\"m away\"]}),habit.location.address&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"\\uD83D\\uDCCD \",habit.location.address]})]},habit._id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 dark:text-white mb-4\",children:\"Nearby Tasks\"}),nearbyTasks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No tasks found near your location.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:nearbyTasks.map(task=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-2\",children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 mb-2\",children:[\"Distance: \",Math.round(task.distance),\"m away\"]}),task.location.address&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"\\uD83D\\uDCCD \",task.location.address]})]},task._id))})]})]});};export default LocationHabits;","map":{"version":3,"names":["React","useState","useEffect","locationAPI","jsx","_jsx","jsxs","_jsxs","LocationHabits","nearbyHabits","setNearbyHabits","nearbyTasks","setNearbyTasks","loading","setLoading","location","setLocation","getCurrentLocation","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","loadNearbyItems","error","console","alert","lat","lon","res","getNearby","data","habits","tasks","className","children","onClick","disabled","toFixed","length","map","habit","name","Math","round","distance","address","_id","task","title"],"sources":["C:/Users/mehta/OneDrive/Pictures/Desktop/habit-tracker - Copy/frontend/src/components/Location/LocationHabits.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { locationAPI } from '../../services/api';\r\n\r\nconst LocationHabits = () => {\r\n  const [nearbyHabits, setNearbyHabits] = useState([]);\r\n  const [nearbyTasks, setNearbyTasks] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [location, setLocation] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getCurrentLocation();\r\n  }, []);\r\n\r\n  const getCurrentLocation = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          setLocation({\r\n            latitude: position.coords.latitude,\r\n            longitude: position.coords.longitude\r\n          });\r\n          loadNearbyItems(position.coords.latitude, position.coords.longitude);\r\n        },\r\n        (error) => {\r\n          console.error('Error getting location:', error);\r\n          alert('Unable to get your location. Please enable location services.');\r\n        }\r\n      );\r\n    } else {\r\n      alert('Geolocation is not supported by your browser.');\r\n    }\r\n  };\r\n\r\n  const loadNearbyItems = async (lat, lon) => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await locationAPI.getNearby({ latitude: lat, longitude: lon });\r\n      setNearbyHabits(res.data.habits || []);\r\n      setNearbyTasks(res.data.tasks || []);\r\n    } catch (error) {\r\n      console.error('Failed to load nearby items:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-8\">\r\n        üìç Location-Based Habits & Tasks\r\n      </h1>\r\n\r\n      <div className=\"mb-6\">\r\n        <button\r\n          onClick={getCurrentLocation}\r\n          disabled={loading}\r\n          className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition disabled:opacity-50\"\r\n        >\r\n          {loading ? 'Loading...' : 'Refresh Location'}\r\n        </button>\r\n      </div>\r\n\r\n      {location && (\r\n        <div className=\"mb-6 text-sm text-gray-600 dark:text-gray-400\">\r\n          Current Location: {location.latitude.toFixed(4)}, {location.longitude.toFixed(4)}\r\n        </div>\r\n      )}\r\n\r\n      {/* Nearby Habits */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Nearby Habits\r\n        </h2>\r\n        {nearbyHabits.length === 0 ? (\r\n          <p className=\"text-gray-600 dark:text-gray-400\">No habits found near your location.</p>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {nearbyHabits.map((habit) => (\r\n              <div\r\n                key={habit._id}\r\n                className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\"\r\n              >\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                  {habit.name}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\r\n                  Distance: {Math.round(habit.distance)}m away\r\n                </p>\r\n                {habit.location.address && (\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    üìç {habit.location.address}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Nearby Tasks */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Nearby Tasks\r\n        </h2>\r\n        {nearbyTasks.length === 0 ? (\r\n          <p className=\"text-gray-600 dark:text-gray-400\">No tasks found near your location.</p>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {nearbyTasks.map((task) => (\r\n              <div\r\n                key={task._id}\r\n                className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\"\r\n              >\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                  {task.title}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\r\n                  Distance: {Math.round(task.distance)}m away\r\n                </p>\r\n                {task.location.address && (\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    üìç {task.location.address}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocationHabits;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mehta\\\\OneDrive\\\\Pictures\\\\Desktop\\\\habit-tracker - Copy\\\\frontend\\\\src\\\\components\\\\Calendar\\\\CalendarView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { habitsAPI, tasksAPI } from '../../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CalendarView = () => {\n  _s();\n  const [habits, setHabits] = useState([]);\n  const [tasks, setTasks] = useState([]);\n  const [selectedHabit, setSelectedHabit] = useState(null);\n  const [viewMode, setViewMode] = useState('habits'); // 'habits' or 'tasks'\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    loadData();\n  }, []);\n  const loadData = async () => {\n    try {\n      const [habitsRes, tasksRes] = await Promise.all([habitsAPI.getAll(), tasksAPI.getAll({\n        sortBy: 'dueDate'\n      })]);\n      setHabits(habitsRes.data);\n      setTasks(tasksRes.data);\n      if (habitsRes.data.length > 0) {\n        setSelectedHabit(habitsRes.data[0]);\n      }\n    } catch (error) {\n      console.error('Failed to load data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getDaysInMonth = date => {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    return {\n      daysInMonth,\n      startingDayOfWeek\n    };\n  };\n  const isHabitCompleted = date => {\n    if (!selectedHabit) return false;\n    const checkDate = new Date(date);\n    checkDate.setHours(0, 0, 0, 0);\n    return selectedHabit.completions.some(c => {\n      const completionDate = new Date(c.date);\n      completionDate.setHours(0, 0, 0, 0);\n      return c.completed && completionDate.getTime() === checkDate.getTime();\n    });\n  };\n  const getTasksForDate = date => {\n    const checkDate = new Date(date);\n    checkDate.setHours(0, 0, 0, 0);\n    return tasks.filter(task => {\n      if (!task.dueDate) return false;\n      const taskDate = new Date(task.dueDate);\n      taskDate.setHours(0, 0, 0, 0);\n      return taskDate.getTime() === checkDate.getTime();\n    });\n  };\n  const handleToggleDay = async date => {\n    if (!selectedHabit) return;\n    try {\n      const isCompleted = isHabitCompleted(date);\n      if (isCompleted) {\n        await habitsAPI.uncomplete(selectedHabit._id, date.toISOString());\n      } else {\n        await habitsAPI.complete(selectedHabit._id, date.toISOString());\n      }\n      loadData();\n    } catch (error) {\n      console.error('Failed to toggle habit:', error);\n    }\n  };\n  const changeMonth = direction => {\n    setCurrentMonth(prev => {\n      const newDate = new Date(prev);\n      newDate.setMonth(prev.getMonth() + direction);\n      return newDate;\n    });\n  };\n  const renderCalendar = () => {\n    const {\n      daysInMonth,\n      startingDayOfWeek\n    } = getDaysInMonth(currentMonth);\n    const days = [];\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    // Empty cells for days before month starts\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      days.push(/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aspect-square\"\n      }, `empty-${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this));\n    }\n\n    // Days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);\n      date.setHours(0, 0, 0, 0);\n      const isToday = date.getTime() === today.getTime();\n      const isPast = date < today;\n      const isFuture = date > today;\n      if (viewMode === 'habits') {\n        const isCompleted = isHabitCompleted(date);\n        days.push(/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => !isFuture && handleToggleDay(date),\n          disabled: isFuture,\n          className: `aspect-square flex items-center justify-center rounded-lg font-medium transition-all ${isToday ? 'ring-2 ring-blue-500' : ''} ${isCompleted ? 'bg-green-500 text-white hover:bg-green-600' : isPast ? 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-600' : isFuture ? 'bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed' : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'}`,\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this));\n      } else {\n        const dayTasks = getTasksForDate(date);\n        const completedTasks = dayTasks.filter(t => t.status === 'Completed').length;\n        const pendingTasks = dayTasks.filter(t => t.status === 'Pending').length;\n        const hasHighPriority = dayTasks.some(t => t.priority === 'High' && t.status === 'Pending');\n        days.push(/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `aspect-square flex flex-col items-center justify-center rounded-lg font-medium transition-all p-1 ${isToday ? 'ring-2 ring-purple-500' : ''} ${hasHighPriority ? 'bg-red-100 dark:bg-red-900/30 border-2 border-red-500' : pendingTasks > 0 ? 'bg-yellow-100 dark:bg-yellow-900/30' : completedTasks > 0 ? 'bg-green-100 dark:bg-green-900/30' : 'bg-gray-100 dark:bg-gray-800'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm font-semibold\",\n            children: day\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), dayTasks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-1 mt-1\",\n            children: [pendingTasks > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs bg-yellow-500 text-white rounded-full px-1\",\n              children: pendingTasks\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this), completedTasks > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs bg-green-500 text-white rounded-full px-1\",\n              children: completedTasks\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)]\n        }, day, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this));\n      }\n    }\n    return days;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl text-gray-600 dark:text-gray-400\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-gray-900 dark:text-white mb-2\",\n        children: \"Calendar View\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 dark:text-gray-400\",\n        children: \"Track your habits and tasks over time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 dark:text-gray-300\",\n          children: \"View Mode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setViewMode('habits'),\n            className: `px-4 py-2 rounded-lg font-medium transition ${viewMode === 'habits' ? 'bg-blue-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'}`,\n            children: \"Habits\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setViewMode('tasks'),\n            className: `px-4 py-2 rounded-lg font-medium transition ${viewMode === 'tasks' ? 'bg-purple-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'}`,\n            children: \"Tasks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), viewMode === 'habits' && habits.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n          children: \"Select Habit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: (selectedHabit === null || selectedHabit === void 0 ? void 0 : selectedHabit._id) || '',\n          onChange: e => setSelectedHabit(habits.find(h => h._id === e.target.value)),\n          className: \"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition\",\n          children: habits.map(habit => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: habit._id,\n            children: habit.name\n          }, habit._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), viewMode === 'habits' && habits.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-16 bg-white dark:bg-gray-800 rounded-xl shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-6xl mb-4\",\n        children: \"\\uD83D\\uDCC5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold text-gray-900 dark:text-white mb-2\",\n        children: \"No habits to display\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 dark:text-gray-400\",\n        children: \"Create a habit first to see the calendar view\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => changeMonth(-1),\n          className: \"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-6 h-6\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M15 19l-7-7 7-7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 dark:text-white\",\n          children: currentMonth.toLocaleDateString('en-US', {\n            month: 'long',\n            year: 'numeric'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => changeMonth(1),\n          className: \"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-6 h-6\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M9 5l7 7-7 7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 gap-2 mb-2\",\n        children: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center font-semibold text-gray-600 dark:text-gray-400 py-2\",\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 gap-2\",\n        children: renderCalendar()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex items-center justify-center space-x-6 text-sm flex-wrap gap-4\",\n        children: viewMode === 'habits' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-green-500 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 dark:text-gray-400\",\n              children: \"Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 dark:text-gray-400\",\n              children: \"Incomplete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 dark:text-gray-400\",\n              children: \"Future\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-red-100 dark:bg-red-900/30 border-2 border-red-500 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 dark:text-gray-400\",\n              children: \"High Priority\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-yellow-100 dark:bg-yellow-900/30 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 dark:text-gray-400\",\n              children: \"Pending Tasks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-green-100 dark:bg-green-900/30 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 dark:text-gray-400\",\n              children: \"Completed Tasks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 5\n  }, this);\n};\n_s(CalendarView, \"+HTz5ayX752TNVkdJFrt/YcKZJU=\");\n_c = CalendarView;\nexport default CalendarView;\nvar _c;\n$RefreshReg$(_c, \"CalendarView\");","map":{"version":3,"names":["React","useState","useEffect","habitsAPI","tasksAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","CalendarView","_s","habits","setHabits","tasks","setTasks","selectedHabit","setSelectedHabit","viewMode","setViewMode","currentMonth","setCurrentMonth","Date","loading","setLoading","loadData","habitsRes","tasksRes","Promise","all","getAll","sortBy","data","length","error","console","getDaysInMonth","date","year","getFullYear","month","getMonth","firstDay","lastDay","daysInMonth","getDate","startingDayOfWeek","getDay","isHabitCompleted","checkDate","setHours","completions","some","c","completionDate","completed","getTime","getTasksForDate","filter","task","dueDate","taskDate","handleToggleDay","isCompleted","uncomplete","_id","toISOString","complete","changeMonth","direction","prev","newDate","setMonth","renderCalendar","days","today","i","push","className","fileName","_jsxFileName","lineNumber","columnNumber","day","isToday","isPast","isFuture","onClick","disabled","children","dayTasks","completedTasks","t","status","pendingTasks","hasHighPriority","priority","value","onChange","e","find","h","target","map","habit","name","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","toLocaleDateString","_c","$RefreshReg$"],"sources":["C:/Users/mehta/OneDrive/Pictures/Desktop/habit-tracker - Copy/frontend/src/components/Calendar/CalendarView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { habitsAPI, tasksAPI } from '../../services/api';\r\n\r\nconst CalendarView = () => {\r\n  const [habits, setHabits] = useState([]);\r\n  const [tasks, setTasks] = useState([]);\r\n  const [selectedHabit, setSelectedHabit] = useState(null);\r\n  const [viewMode, setViewMode] = useState('habits'); // 'habits' or 'tasks'\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const [habitsRes, tasksRes] = await Promise.all([\r\n        habitsAPI.getAll(),\r\n        tasksAPI.getAll({ sortBy: 'dueDate' })\r\n      ]);\r\n      setHabits(habitsRes.data);\r\n      setTasks(tasksRes.data);\r\n      if (habitsRes.data.length > 0) {\r\n        setSelectedHabit(habitsRes.data[0]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getDaysInMonth = (date) => {\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    const daysInMonth = lastDay.getDate();\r\n    const startingDayOfWeek = firstDay.getDay();\r\n\r\n    return { daysInMonth, startingDayOfWeek };\r\n  };\r\n\r\n  const isHabitCompleted = (date) => {\r\n    if (!selectedHabit) return false;\r\n    \r\n    const checkDate = new Date(date);\r\n    checkDate.setHours(0, 0, 0, 0);\r\n\r\n    return selectedHabit.completions.some(c => {\r\n      const completionDate = new Date(c.date);\r\n      completionDate.setHours(0, 0, 0, 0);\r\n      return c.completed && completionDate.getTime() === checkDate.getTime();\r\n    });\r\n  };\r\n\r\n  const getTasksForDate = (date) => {\r\n    const checkDate = new Date(date);\r\n    checkDate.setHours(0, 0, 0, 0);\r\n    \r\n    return tasks.filter(task => {\r\n      if (!task.dueDate) return false;\r\n      const taskDate = new Date(task.dueDate);\r\n      taskDate.setHours(0, 0, 0, 0);\r\n      return taskDate.getTime() === checkDate.getTime();\r\n    });\r\n  };\r\n\r\n  const handleToggleDay = async (date) => {\r\n    if (!selectedHabit) return;\r\n\r\n    try {\r\n      const isCompleted = isHabitCompleted(date);\r\n      if (isCompleted) {\r\n        await habitsAPI.uncomplete(selectedHabit._id, date.toISOString());\r\n      } else {\r\n        await habitsAPI.complete(selectedHabit._id, date.toISOString());\r\n      }\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Failed to toggle habit:', error);\r\n    }\r\n  };\r\n\r\n  const changeMonth = (direction) => {\r\n    setCurrentMonth(prev => {\r\n      const newDate = new Date(prev);\r\n      newDate.setMonth(prev.getMonth() + direction);\r\n      return newDate;\r\n    });\r\n  };\r\n\r\n  const renderCalendar = () => {\r\n    const { daysInMonth, startingDayOfWeek } = getDaysInMonth(currentMonth);\r\n    const days = [];\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    // Empty cells for days before month starts\r\n    for (let i = 0; i < startingDayOfWeek; i++) {\r\n      days.push(<div key={`empty-${i}`} className=\"aspect-square\" />);\r\n    }\r\n\r\n    // Days of the month\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);\r\n      date.setHours(0, 0, 0, 0);\r\n      const isToday = date.getTime() === today.getTime();\r\n      const isPast = date < today;\r\n      const isFuture = date > today;\r\n\r\n      if (viewMode === 'habits') {\r\n        const isCompleted = isHabitCompleted(date);\r\n        days.push(\r\n          <button\r\n            key={day}\r\n            onClick={() => !isFuture && handleToggleDay(date)}\r\n            disabled={isFuture}\r\n            className={`aspect-square flex items-center justify-center rounded-lg font-medium transition-all ${\r\n              isToday ? 'ring-2 ring-blue-500' : ''\r\n            } ${\r\n              isCompleted\r\n                ? 'bg-green-500 text-white hover:bg-green-600'\r\n                : isPast\r\n                ? 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-600'\r\n                : isFuture\r\n                ? 'bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed'\r\n                : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'\r\n            }`}\r\n          >\r\n            {day}\r\n          </button>\r\n        );\r\n      } else {\r\n        const dayTasks = getTasksForDate(date);\r\n        const completedTasks = dayTasks.filter(t => t.status === 'Completed').length;\r\n        const pendingTasks = dayTasks.filter(t => t.status === 'Pending').length;\r\n        const hasHighPriority = dayTasks.some(t => t.priority === 'High' && t.status === 'Pending');\r\n\r\n        days.push(\r\n          <div\r\n            key={day}\r\n            className={`aspect-square flex flex-col items-center justify-center rounded-lg font-medium transition-all p-1 ${\r\n              isToday ? 'ring-2 ring-purple-500' : ''\r\n            } ${\r\n              hasHighPriority\r\n                ? 'bg-red-100 dark:bg-red-900/30 border-2 border-red-500'\r\n                : pendingTasks > 0\r\n                ? 'bg-yellow-100 dark:bg-yellow-900/30'\r\n                : completedTasks > 0\r\n                ? 'bg-green-100 dark:bg-green-900/30'\r\n                : 'bg-gray-100 dark:bg-gray-800'\r\n            }`}\r\n          >\r\n            <span className=\"text-sm font-semibold\">{day}</span>\r\n            {dayTasks.length > 0 && (\r\n              <div className=\"flex gap-1 mt-1\">\r\n                {pendingTasks > 0 && (\r\n                  <span className=\"text-xs bg-yellow-500 text-white rounded-full px-1\">\r\n                    {pendingTasks}\r\n                  </span>\r\n                )}\r\n                {completedTasks > 0 && (\r\n                  <span className=\"text-xs bg-green-500 text-white rounded-full px-1\">\r\n                    {completedTasks}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return days;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-xl text-gray-600 dark:text-gray-400\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Calendar View\r\n        </h1>\r\n        <p className=\"text-gray-600 dark:text-gray-400\">\r\n          Track your habits and tasks over time\r\n        </p>\r\n      </div>\r\n\r\n      {/* View Mode Toggle */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n            View Mode\r\n          </label>\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => setViewMode('habits')}\r\n              className={`px-4 py-2 rounded-lg font-medium transition ${\r\n                viewMode === 'habits'\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              Habits\r\n            </button>\r\n            <button\r\n              onClick={() => setViewMode('tasks')}\r\n              className={`px-4 py-2 rounded-lg font-medium transition ${\r\n                viewMode === 'tasks'\r\n                  ? 'bg-purple-600 text-white'\r\n                  : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              Tasks\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {viewMode === 'habits' && habits.length > 0 && (\r\n          <div className=\"mt-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Select Habit\r\n            </label>\r\n            <select\r\n              value={selectedHabit?._id || ''}\r\n              onChange={(e) => setSelectedHabit(habits.find(h => h._id === e.target.value))}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition\"\r\n            >\r\n              {habits.map(habit => (\r\n                <option key={habit._id} value={habit._id}>\r\n                  {habit.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {viewMode === 'habits' && habits.length === 0 ? (\r\n        <div className=\"text-center py-16 bg-white dark:bg-gray-800 rounded-xl shadow\">\r\n          <div className=\"text-6xl mb-4\">ðŸ“…</div>\r\n          <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n            No habits to display\r\n          </h2>\r\n          <p className=\"text-gray-500 dark:text-gray-400\">\r\n            Create a habit first to see the calendar view\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <button\r\n              onClick={() => changeMonth(-1)}\r\n              className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n              </svg>\r\n            </button>\r\n            \r\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n              {currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\r\n            </h2>\r\n            \r\n            <button\r\n              onClick={() => changeMonth(1)}\r\n              className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-7 gap-2 mb-2\">\r\n            {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\r\n              <div key={day} className=\"text-center font-semibold text-gray-600 dark:text-gray-400 py-2\">\r\n                {day}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-7 gap-2\">\r\n            {renderCalendar()}\r\n          </div>\r\n\r\n          <div className=\"mt-6 flex items-center justify-center space-x-6 text-sm flex-wrap gap-4\">\r\n            {viewMode === 'habits' ? (\r\n              <>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-green-500 rounded\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">Completed</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">Incomplete</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">Future</span>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-red-100 dark:bg-red-900/30 border-2 border-red-500 rounded\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">High Priority</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-yellow-100 dark:bg-yellow-900/30 rounded\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">Pending Tasks</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-4 h-4 bg-green-100 dark:bg-green-900/30 rounded\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">Completed Tasks</span>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalendarView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
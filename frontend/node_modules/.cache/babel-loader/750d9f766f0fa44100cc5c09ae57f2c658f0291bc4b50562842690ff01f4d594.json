{"ast":null,"code":"import React,{useState}from'react';import{twoFactorAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TwoFactorAuth=()=>{const[enabled,setEnabled]=useState(false);const[otp,setOtp]=useState('');const[loading,setLoading]=useState(false);const[secret,setSecret]=useState('');const[qrCode,setQrCode]=useState('');const handleEnable=async()=>{try{setLoading(true);const res=await twoFactorAPI.enable();setSecret(res.data.secret);setQrCode(res.data.otpauth);setEnabled(true);}catch(error){console.error('Failed to enable 2FA:',error);alert('Failed to enable 2FA');}finally{setLoading(false);}};const handleDisable=async()=>{try{setLoading(true);await twoFactorAPI.disable();setEnabled(false);setSecret('');setQrCode('');alert('2FA disabled successfully');}catch(error){console.error('Failed to disable 2FA:',error);alert('Failed to disable 2FA');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-white mb-8\",children:\"\\uD83D\\uDD10 Two-Factor Authentication\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\",children:!enabled?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6\",children:\"Enable two-factor authentication to add an extra layer of security to your account.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEnable,disabled:loading,className:\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition disabled:opacity-50\",children:loading?'Enabling...':'Enable 2FA'})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-4\",children:\"Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)\"}),qrCode&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg border-2 border-gray-300 inline-block mb-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mb-2\",children:[\"Secret: \",secret]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 break-all\",children:qrCode})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDisable,disabled:loading,className:\"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition disabled:opacity-50\",children:loading?'Disabling...':'Disable 2FA'})]})})]});};export default TwoFactorAuth;","map":{"version":3,"names":["React","useState","twoFactorAPI","jsx","_jsx","jsxs","_jsxs","TwoFactorAuth","enabled","setEnabled","otp","setOtp","loading","setLoading","secret","setSecret","qrCode","setQrCode","handleEnable","res","enable","data","otpauth","error","console","alert","handleDisable","disable","className","children","onClick","disabled"],"sources":["C:/Users/mehta/OneDrive/Pictures/Desktop/habit-tracker - Copy/frontend/src/components/Auth/TwoFactorAuth.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { twoFactorAPI } from '../../services/api';\r\n\r\nconst TwoFactorAuth = () => {\r\n  const [enabled, setEnabled] = useState(false);\r\n  const [otp, setOtp] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [secret, setSecret] = useState('');\r\n  const [qrCode, setQrCode] = useState('');\r\n\r\n  const handleEnable = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await twoFactorAPI.enable();\r\n      setSecret(res.data.secret);\r\n      setQrCode(res.data.otpauth);\r\n      setEnabled(true);\r\n    } catch (error) {\r\n      console.error('Failed to enable 2FA:', error);\r\n      alert('Failed to enable 2FA');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDisable = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await twoFactorAPI.disable();\r\n      setEnabled(false);\r\n      setSecret('');\r\n      setQrCode('');\r\n      alert('2FA disabled successfully');\r\n    } catch (error) {\r\n      console.error('Failed to disable 2FA:', error);\r\n      alert('Failed to disable 2FA');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-8\">\r\n        üîê Two-Factor Authentication\r\n      </h1>\r\n\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6\">\r\n        {!enabled ? (\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\r\n              Enable two-factor authentication to add an extra layer of security to your account.\r\n            </p>\r\n            <button\r\n              onClick={handleEnable}\r\n              disabled={loading}\r\n              className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Enabling...' : 'Enable 2FA'}\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <div className=\"mb-6\">\r\n              <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n                Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)\r\n              </p>\r\n              {qrCode && (\r\n                <div className=\"bg-white p-4 rounded-lg border-2 border-gray-300 inline-block mb-4\">\r\n                  <p className=\"text-xs text-gray-600 mb-2\">Secret: {secret}</p>\r\n                  <p className=\"text-xs text-gray-600 break-all\">{qrCode}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={handleDisable}\r\n              disabled={loading}\r\n              className=\"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Disabling...' : 'Disable 2FA'}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TwoFactorAuth;\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,YAAY,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGR,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACS,GAAG,CAAEC,MAAM,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACa,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACe,MAAM,CAAEC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAAAiB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACFL,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAM,GAAG,CAAG,KAAM,CAAAjB,YAAY,CAACkB,MAAM,CAAC,CAAC,CACvCL,SAAS,CAACI,GAAG,CAACE,IAAI,CAACP,MAAM,CAAC,CAC1BG,SAAS,CAACE,GAAG,CAACE,IAAI,CAACC,OAAO,CAAC,CAC3Bb,UAAU,CAAC,IAAI,CAAC,CAClB,CAAE,MAAOc,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CE,KAAK,CAAC,sBAAsB,CAAC,CAC/B,CAAC,OAAS,CACRZ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAa,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACFb,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAX,YAAY,CAACyB,OAAO,CAAC,CAAC,CAC5BlB,UAAU,CAAC,KAAK,CAAC,CACjBM,SAAS,CAAC,EAAE,CAAC,CACbE,SAAS,CAAC,EAAE,CAAC,CACbQ,KAAK,CAAC,2BAA2B,CAAC,CACpC,CAAE,MAAOF,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CE,KAAK,CAAC,uBAAuB,CAAC,CAChC,CAAC,OAAS,CACRZ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEP,KAAA,QAAKsB,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAC1DzB,IAAA,OAAIwB,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,wCAEtE,CAAI,CAAC,cAELzB,IAAA,QAAKwB,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAChE,CAACrB,OAAO,cACPF,KAAA,QAAAuB,QAAA,eACEzB,IAAA,MAAGwB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,qFAErD,CAAG,CAAC,cACJzB,IAAA,WACE0B,OAAO,CAAEZ,YAAa,CACtBa,QAAQ,CAAEnB,OAAQ,CAClBgB,SAAS,CAAC,0GAA0G,CAAAC,QAAA,CAEnHjB,OAAO,CAAG,aAAa,CAAG,YAAY,CACjC,CAAC,EACN,CAAC,cAENN,KAAA,QAAAuB,QAAA,eACEvB,KAAA,QAAKsB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzB,IAAA,MAAGwB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,mFAErD,CAAG,CAAC,CACHb,MAAM,eACLV,KAAA,QAAKsB,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjFvB,KAAA,MAAGsB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,UAAQ,CAACf,MAAM,EAAI,CAAC,cAC9DV,IAAA,MAAGwB,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEb,MAAM,CAAI,CAAC,EACxD,CACN,EACE,CAAC,cACNZ,IAAA,WACE0B,OAAO,CAAEJ,aAAc,CACvBK,QAAQ,CAAEnB,OAAQ,CAClBgB,SAAS,CAAC,wGAAwG,CAAAC,QAAA,CAEjHjB,OAAO,CAAG,cAAc,CAAG,aAAa,CACnC,CAAC,EACN,CACN,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
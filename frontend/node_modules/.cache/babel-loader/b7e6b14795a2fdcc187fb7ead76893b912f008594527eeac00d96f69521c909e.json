{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{aiAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AIChat=()=>{const[messages,setMessages]=useState([{role:'assistant',content:\"Hello! I'm your AI Productivity Coach. How can I help you today?\"}]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);const handleSend=async e=>{e.preventDefault();if(!input.trim()||loading)return;const userMessage={role:'user',content:input};const currentInput=input;setMessages(prev=>[...prev,userMessage]);setInput('');setLoading(true);try{var _res$data,_res$data2;const res=await aiAPI.chat(currentInput);const responseText=((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.response)||((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message)||\"I'm here to help you stay motivated! Keep up the great work on your habits and tasks.\";setMessages(prev=>[...prev,{role:'assistant',content:responseText}]);}catch(error){var _error$response,_error$response$data;console.error('Failed to get AI response:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Sorry, I encountered an error. Please try again.';setMessages(prev=>[...prev,{role:'assistant',content:errorMessage}]);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-white mb-8\",children:\"\\uD83D\\uDCAC AI Productivity Coach\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl shadow-lg h-[600px] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-6 space-y-4\",children:[messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.role==='user'?'justify-end':'justify-start'),children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xs lg:max-w-md px-4 py-2 rounded-lg \".concat(message.role==='user'?'bg-blue-600 text-white':'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white'),children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:message.content})})},index)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-200 dark:bg-gray-700 px-4 py-2 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Thinking...\"})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSend,className:\"p-4 border-t border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Ask me anything about productivity...\",className:\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!input.trim()||loading,className:\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition disabled:opacity-50\",children:\"Send\"})]})})]})]});};export default AIChat;","map":{"version":3,"names":["React","useState","useRef","useEffect","aiAPI","jsx","_jsx","jsxs","_jsxs","AIChat","messages","setMessages","role","content","input","setInput","loading","setLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","e","preventDefault","trim","userMessage","currentInput","prev","_res$data","_res$data2","res","chat","responseText","data","response","message","error","_error$response","_error$response$data","console","errorMessage","className","children","map","index","concat","ref","onSubmit","type","value","onChange","target","placeholder","disabled"],"sources":["C:/Users/mehta/OneDrive/Pictures/Desktop/habit-tracker - Copy/frontend/src/components/AI/AIChat.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { aiAPI } from '../../services/api';\r\n\r\nconst AIChat = () => {\r\n  const [messages, setMessages] = useState([\r\n    { role: 'assistant', content: \"Hello! I'm your AI Productivity Coach. How can I help you today?\" }\r\n  ]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSend = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage = { role: 'user', content: input };\r\n    const currentInput = input;\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await aiAPI.chat(currentInput);\r\n      const responseText = res.data?.response || res.data?.message || \"I'm here to help you stay motivated! Keep up the great work on your habits and tasks.\";\r\n      setMessages(prev => [...prev, { role: 'assistant', content: responseText }]);\r\n    } catch (error) {\r\n      console.error('Failed to get AI response:', error);\r\n      const errorMessage = error.response?.data?.message || 'Sorry, I encountered an error. Please try again.';\r\n      setMessages(prev => [...prev, { \r\n        role: 'assistant', \r\n        content: errorMessage\r\n      }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-8\">\r\n        ðŸ’¬ AI Productivity Coach\r\n      </h1>\r\n\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg h-[600px] flex flex-col\">\r\n        {/* Messages */}\r\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n          {messages.map((message, index) => (\r\n            <div\r\n              key={index}\r\n              className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n            >\r\n              <div\r\n                className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\r\n                  message.role === 'user'\r\n                    ? 'bg-blue-600 text-white'\r\n                    : 'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white'\r\n                }`}\r\n              >\r\n                <p className=\"text-sm\">{message.content}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {loading && (\r\n            <div className=\"flex justify-start\">\r\n              <div className=\"bg-gray-200 dark:bg-gray-700 px-4 py-2 rounded-lg\">\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Thinking...</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Input */}\r\n        <form onSubmit={handleSend} className=\"p-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder=\"Ask me anything about productivity...\"\r\n              className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              disabled={loading}\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              disabled={!input.trim() || loading}\r\n              className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition disabled:opacity-50\"\r\n            >\r\n              Send\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AIChat;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}